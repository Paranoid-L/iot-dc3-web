(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7a17ce1a"],{"33dd":function(e,t,a){},5278:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"edit-card"},[a("el-card",{attrs:{shadow:"hover"}},[a("div",{staticClass:"edit-content"},[a("el-steps",{attrs:{active:e.active,"align-center":""}},[a("el-step",{attrs:{title:"模板信息编辑"}}),a("el-step",{attrs:{title:"模板位号编辑"}})],1)],1)]),0===e.active?a("el-card",{attrs:{shadow:"hover"}},[a("div",{staticClass:"edit-content"},[a("el-divider",{attrs:{"content-position":"left"}},[e._v("模板信息编辑")]),a("div",{staticClass:"content-edit-profile"},[a("el-form",{ref:"profileFormData",attrs:{inline:!0,model:e.profileFormData,rules:e.profileFormRule,size:"small"}},[a("div",{staticClass:"edit-profile-form"},[a("el-form-item",{attrs:{label:"模板名称",prop:"name"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入模板名称"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.profileUpdate.apply(null,arguments)}},model:{value:e.profileFormData.name,callback:function(t){e.$set(e.profileFormData,"name",t)},expression:"profileFormData.name"}})],1),a("el-form-item",{attrs:{label:"使能",prop:"enable"}},[a("el-select",{staticClass:"edit-form-small",attrs:{clearable:"",placeholder:"请选择使能"},model:{value:e.profileFormData.enable,callback:function(t){e.$set(e.profileFormData,"enable",t)},expression:"profileFormData.enable"}},[a("el-option",{attrs:{label:"启用",value:!0}}),a("el-option",{attrs:{label:"停用",value:!1}})],1)],1)],1),a("div",{staticClass:"edit-profile-form"},[a("el-form-item",{attrs:{label:"模板描述",prop:"description"}},[a("el-input",{staticClass:"edit-form-large",attrs:{clearable:"",type:"textarea",maxlength:"300","show-word-limit":"",placeholder:"请输入模板描述"},model:{value:e.profileFormData.description,callback:function(t){e.$set(e.profileFormData,"description",t)},expression:"profileFormData.description"}})],1)],1),a("el-form-item",{staticClass:"edit-button"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.profileUpdate}},[e._v("修改")]),a("el-button",{attrs:{icon:"el-icon-refresh-left"},on:{click:e.profileReset}},[e._v("恢复")]),a("el-button",{attrs:{type:"warning",icon:"el-icon-right",plain:""},on:{click:e.next}},[e._v("下一步")])],1)],1)],1)],1)]):e._e(),1===e.active?a("el-card",{attrs:{shadow:"hover"}},[a("div",{staticClass:"edit-content"},[a("el-divider",{attrs:{"content-position":"left"}},[e._v("模板位号配置")]),a("point-list",{attrs:{pre:!0,profileId:e.id},on:{"pre-handle":e.pre,"next-handle":e.next}})],1)]):e._e()],1)},i=[],o=a("5530"),n=a("c633"),l=a("7f87"),s={components:{pointList:n["a"]},data:function(){return{id:this.$route.query.id,active:+this.$route.query.active,oldProfileFormData:{},profileFormData:{pointIds:[]},profileFormRule:{name:[{required:!0,message:"请输入模板名称",trigger:"blur"},{min:2,max:32,message:"请输入 2~32 位字长的模板名称",trigger:"blur"},{pattern:/^[A-Za-z0-9\u4e00-\u9fa5][A-Za-z0-9\u4e00-\u9fa5-_]*$/,message:"请输入正确格式的模板名称"}],enable:[{required:!0,message:"请选择使能",trigger:"change"}],description:[{max:300,message:"最多输入300个字符",trigger:"blur"}]}}},created:function(){this.profile()},methods:{profile:function(){var e=this,t=this.$route.query.id;Object(l["c"])(t).then((function(t){e.profileFormData=t.data,e.oldProfileFormData=Object(o["a"])({},t.data)}))},profileUpdate:function(){var e=this;this.$refs["profileFormData"].validate((function(t){t&&Object(l["f"])(e.profileFormData).then((function(t){e.oldProfileFormData=Object(o["a"])({},t.data)}))}))},pre:function(){this.active--,this.changeActive(this.active)},next:function(){this.active++,this.active>1?this.$router.push({name:"profile"}):this.changeActive(this.active)},profileReset:function(){this.profileFormData=Object(o["a"])({},this.oldProfileFormData)},changeActive:function(e){var t=this.$route.query;this.$router.push({query:Object(o["a"])(Object(o["a"])({},t),{},{active:e})})}}},c=s,p=(a("78f8"),a("2877")),u=Object(p["a"])(c,r,i,!1,null,null,null);t["default"]=u.exports},"78f8":function(e,t,a){"use strict";a("33dd")},"7f87":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"d",(function(){return o})),a.d(t,"f",(function(){return n})),a.d(t,"c",(function(){return l})),a.d(t,"b",(function(){return s})),a.d(t,"e",(function(){return c}));var r=a("9179"),i=function(e){return Object(r["a"])({url:"api/v3/manager/profile/add",method:"post",data:e})},o=function(e){return Object(r["a"])({url:"api/v3/manager/profile/delete/"+e,method:"post"})},n=function(e){return Object(r["a"])({url:"api/v3/manager/profile/update",method:"post",data:e})},l=function(e){return Object(r["a"])({url:"api/v3/manager/profile/id/"+e,method:"get"})},s=function(e){return Object(r["a"])({url:"api/v3/manager/profile/device_id/"+e,method:"get"})},c=function(e){return Object(r["a"])({url:"api/v3/manager/profile/list",method:"post",data:e})}}}]);